## 背景概述
项目的lua文件非常多，对这个插件有需求了。初步定制后还是不能满足需要，准备大版本修改下。

## 设计
数据构建：
- 独立分析每个文件
  - 词法语法语义分析
  - 提取注释类型。注释类型都当成时全局的。
  - 提取全局变量树结构。
- 合并所有文件，生成全局类型表和全局变量树。
  - 局部变量天然是唯一定义的。
    - 如果定义时没有注释类型也没有赋值，reng
  - 全局变量只支持一个定义。其他的写操作当成需要校验的赋值操作。
类型染色：
- 使用全局变量树和全局类型表，对AST节点进行染色。
  - 从叶子往上染色
  - 每个节点只染色一次。


一些逻辑约定：
1. 每个表达式 exp 都有类型，称为颜色。
   1. 只染色一次。
2. 类型
   1. Unknown       待定
   2. Annotation    注释标记 class type
   3. LuaTable      
   4. LuaType lua 基础类型 + 数组 + table
   5. MultiType
3. 注释
   1. 注释 class 都是全局的。
   2. 注释本身的优先级最高 type field 会覆盖掉 lua 里的定义。【推荐使用】
   3. self.x and XX:func() 会在 lua 侧往关联的 class 里添加 field
      1. 这些添加的 field 的类型可能也需要染色标记。